import socket
import threading

server_address = ("127.0.0.1", 1337)

def deposit():
    while True:
        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        sock.connect(server_address)
        sock.sendall(b"deposit")
        sock.close()

def purchase_flag():
    response = b""
    while b"THM" not in response:
        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        sock.connect(server_address)
        sock.sendall(b"purchase flag")
        response = sock.recv(1024)
        sock.close()
    print(response.decode())

def main():
    deposit_thread = threading.Thread(target=deposit)
    purchase_flag_thread = threading.Thread(target=purchase_flag)
    deposit_thread.start()
    purchase_flag_thread.start()

    deposit_thread.join()
    purchase_flag_thread.join()

if __name__ == "__main__":
    main()
